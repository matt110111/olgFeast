#!/usr/bin/env python3
"""
Universal olgFeast Installer
Automatically detects platform and runs appropriate installation script
"""

import os
import sys
import platform
import subprocess

def is_arch_linux():
    """Check if running on Arch Linux"""
    try:
        with open("/etc/os-release", "r") as f:
            content = f.read()
            return "arch" in content.lower() or "manjaro" in content.lower()
    except:
        return False

def main():
    print("üöÄ olgFeast Universal Installer")
    print("===============================")
    print()
    
    system = platform.system().lower()
    
    if system == "windows":
        print("ü™ü Detected Windows system")
        print("Running Windows installer...")
        try:
            subprocess.run(["install.bat"], check=True)
        except subprocess.CalledProcessError:
            print("‚ùå Windows installer failed, trying Python installer...")
            subprocess.run([sys.executable, "install.py"], check=True)
    elif system in ["linux", "darwin"]:
        if is_arch_linux():
            print("üêß Detected Arch Linux system")
            print("Running Arch Linux installer...")
            try:
                subprocess.run(["bash", "install-arch.sh"], check=True)
            except subprocess.CalledProcessError:
                print("‚ùå Arch installer failed, trying Unix installer...")
                try:
                    subprocess.run(["bash", "install.sh"], check=True)
                except subprocess.CalledProcessError:
                    print("‚ùå Unix installer failed, trying Python installer...")
                    subprocess.run([sys.executable, "install.py"], check=True)
        else:
            print("üêß Detected Unix-like system (Linux/macOS)")
            print("Running Unix installer...")
            try:
                subprocess.run(["bash", "install.sh"], check=True)
            except subprocess.CalledProcessError:
                print("‚ùå Unix installer failed, trying Python installer...")
                subprocess.run([sys.executable, "install.py"], check=True)
    else:
        print(f"‚ùì Unknown system: {system}")
        print("Running Python installer...")
        subprocess.run([sys.executable, "install.py"], check=True)

if __name__ == "__main__":
    main()
